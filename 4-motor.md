# 4 Настройка мотора
Настройка мотора обязательно выполняется при первом включении, либо если вы подключили контроллер к другому мотору.  **После замены мотора нельзя нажимать на газ до выполнения настройки мотора. Без повторной настройки, ток двигателя будет рассчитываться неправильно, что может привести к повреждению!**
Во время настройки контроллер тщательно оптимизирует свои параметры под конкретный мотор, он определяет точное положение датчиков Холла, электромеханические параметры двигателя. Если вы меняете двигатель на другой такой же модели, настройку всё равно необходимо будет повторить.  

**За процессом настройки необходимо следить, если во время настройки мотор начинает дёргаться или издавать щёлкающие звуки при вращении, настройку необходимо прервать выключением замка зажигания и после остановки двигателя повторить процесс настройки.**

## Подготовка
Для настройки необходимо установить самокат/велосипед на устойчивую подставку и вывесить приводное колесо. Во время настройки мотор будет вращаться вплоть до максимальной скорости.

Настройку рекомендуется проводить по возможности при пониженном напряжении батареи, чем ниже напряжение тем проще и безопаснее процесс настройки.
## Настройка
Настройка мотора происходит в автоматическом режиме. Для запуска настройки необходимо ввести команду `calib_motor 50`. Цифра 50 в данной команде обозначает мощность тепла в ваттах, которая будет выделяться в моторе во время выполнения обучения Холлов. С помощью данного параметра необходимо добиться максимально плавного вращения на первом этапе настройки. Для мелких моторов достаточно указать 50Вт(иногда можно и меньше), для крупных мотор колёс прямого привода может потребоваться 100 или даже 150Вт. Рекомендуется начинать с 50Вт и если на первом этапе настройки вращение будет неравномерным, перезапустить настройку с большим значением. Осторожно, указанная мощность уходит в тепло, большие значения могут поджарить мотор.  

## Перезапуск настройки
Для перезапуска настройки необходимо выключить, дождаться остановки мотора и обратно включить питание ключом зажигания.  

## Направление вращения
Если в начале обучения колесо крутится в направлении движения назад, нужно перезагрузить контроллер и поменять направление вращения командой `rot_invert 1`, после чего заново запустить обучение.

## Процесс обучения
Процесс обучения длится около 6 минут. Первую минуту мотор медленно вращается в прямом направление, вторую в обратном. После, в течении 4х минут, мотор плавно набирает скорость, в процессе чего контроллер подбирает динамические параметры мотора. 
Если на втором этапе мотор начинает дёргаться или издаёт странные звуки при вращении, необходимо выключить ключ зажигания, дождаться остановки мотора, включить зажигание и повторить обучение.